/* TouchSudoku-showMe-min.js Copyright Â© 2013-2016 David Han, handianping@yahoo.com all rights reserved. */
var TouchSudoku=function(a,K,z,t){function l(a,z){var l=Math.min(a,z);c.cellSize=720>=l?Math.min(68,Math.floor(l/10)):Math.min(80,Math.floor(l/10));c.boxSize=3*c.cellSize+2;c.boardSize=3*c.boxSize+2;c.circleRadius=c.boxSize%2?c.boxSize+1:c.boxSize;c.buttonBorderWidth=c.buttonImage?0:parseInt(c.buttonBorder);c.buttonSize=Math.floor(1.72*(c.cellSize+2*c.buttonBorderWidth));c.buttonActualSize=Math.floor(86*c.buttonSize/120);c.buttonFontSize=Math.floor(0.72*c.buttonActualSize);c.buttonNotationFontSize=
0.6*c.buttonFontSize;c.buttonMenuFontSize=0.5*c.buttonFontSize;c.dialogFontSize=0.64*c.buttonFontSize;c.buttonImage||(c.buttonSize=c.buttonActualSize);c.buttonWidth=c.buttonHeight=c.buttonSize-2*c.buttonBorderWidth}a=a||{};var c=a.conf={version:"1.0.5",str:{STR_TOUCH_SUDOKU:"Touch Sudoku",STR_WRITTEN_BY:"By David Han",STR_CURRENT_VERSION:"Current Version ",STR_OK:"OK",STR_CANCEL:"Cancel",STR_PUZZLE:"Puzzle",STR_PUZZLE_EASY:"Easy",STR_PUZZLE_MEDIUM:"Medium",STR_PUZZLE_HARD:"Hard",STR_PUZZLE_EXPERT:"Expert",
STR_PUZZLE_EASY_HTML:"<u>E</u>asy",STR_PUZZLE_MEDIUM_HTML:"<u>M</u>edium",STR_PUZZLE_HARD_HTML:"<u>H</u>ard",STR_PUZZLE_EXPERT_HTML:"E<u>x</u>pert",STR_PUZZLE_PRICE_TAG_1:"Purchase 100 Interesting Puzzles in Easy level",STR_PUZZLE_PRICE_TAG_2:"Purchase 100 Interesting Puzzles in Medium level",STR_PUZZLE_PRICE_TAG_3:"Purchase 100 Interesting Puzzles in Hard level",STR_PUZZLE_PRICE_TAG_4:"Purchase 100 Interesting Puzzles in Expert level",STR_PUZZLE_PRICE_TAG_5:"Thank you for your previous purchase!<br/>In appreciation for your continuous support, you can purchase the whole Interesting Puzzle Set, ",
STR_PUZZLE_PRICE_TAG_6:"For limited time only, purchase the Interesting Puzzle Set, ",STR_PUZZLE_PRICE_TAG_7:"Purchase the Interesting Puzzle Set, ",STR_COST:" for ",STR_COST_JUST:" for just ",STR_INCLUDING:"including ",STR_PUZZLE_UNIT:" ",STR_COMMA:", ",STR_AND:" and ",STR_TOTALLY:"totally ",STR_PURCHASE_MORE:"+more",STR_PUZZLE_SOLVED:"Puzzle Solved",STR_DONT_UNDERSTAND:"This solution is beyond my reasoning.",STR_STUCK:"I am stuck, stay tuned for new version of Touch Sudoku",STR_INVALID_SULUTION:"Invalid solution",
STR_USE_P_OR_N_KEY:"Use P or N key to move to previous or next input.",STR_SPACE_AND_ENTER_KEY:"Space key to show hint step by step.<br/>Enter key to complete the hint.",STR_RECENT_PUZZLES:"Recent puzzles: <small><u>U</u>nsolved</small>",STR_NO_PURCHASE_CAPABILITY:"No purchase capability.",STR_INPUT_NEW_PUZZLE:"Input new puzzle...",STR_EDIT:"Edit",STR_PUZZLE_SAVED:"Puzzle saved",STR_DISCARD_PUZZLE:"Discard puzzle...",STR_SUDOKU_RULES_AND_TECHNIQUES:"Sudoku Rules and Techniques",STR_FEEDBACK_OR_BUGRETORT:"Feedbacks or bug report",
STR_SUBJECT_FEEDBACK:" User Feedback for Touch Sudoku",STR_DONT_EDIT_DEBLOW:"Please do NOT edit game data below",STR_DONT_EDIT_ABOVE:"Please do NOT edit game data above",STR_MENU_BACK:"Check",STR_MENU_PREV:"Prev",STR_MENU_NEXT:"Next",STR_MENU_HINT:"Hint",STR_MENU_HELP:"Help",STR_MENU_NEW:"New",STR_MENU_PUZZLES:"Puzzles",STR_MENU_RECENT:"Recent",STR_MENU_DISCARD:"Discard",STR_MENU_SAVE:"Save"},appStore:"BlackBerry World",appURI:"http://appworld.blackberry.com/webstore/content/27406089/",blogURI:"http://touchsudoku.blogspot.com/2016/04/sudoku-techniques.html",
gotoLink:null,gotoMail:null,rootSize:[K.innerWidth,K.innerHeight],lineHeightAdjustment:0.96,cellSize:68,boxSize:206,boardSize:611,circleRadius:305,buttonSize:120,buttonBorderWidth:2,buttonBorder:"2px solid #808080",buttonActualSize:86,buttonFontSize:108,colorHighlight:"",cellBorder:"1px solid #606060",boxBorder:"1px solid #404040",boardBorder:"1px solid #606060",colorPreset:"rgba(0, 0, 0, 0.75)",colorFill:"rgba(42, 112, 204, 0.95)",colorNotation:"rgba(0, 0, 0, 0.75)",colorHistory:"rgba(0, 0, 0, 0.1)",
colorEditing:"rgba(0, 0, 0, 0.5)",boardBgColor:"rgba(255, 255, 255, 0.95)",cellBgColor:"rgba(255, 255, 255, 0.5)",panelBgColor:"rgba(255, 255, 255, 0.75)",panelBorderColor:"rgba(0, 0, 0, 0.25)",boardShadow:"0px 0px 10px rgba(255, 255, 255, 0.5)",boxInputShadow:"0px 0px 8px #000 inset",cellInputShadow:"0px 0px 8px #000 inset",charInputWindow:5E3,showMeInterval:30};l(c.rootSize[0],c.rootSize[1]);a.conf=c;a.updateLocale=function(a){if(!t||!t.globalization||"function"!==typeof t.globalization.getPreferredLanguage)return a();
t.globalization.getPreferredLanguage(function(l){if(0===l.value.toLowerCase().indexOf("zh-")){c.blogURI="http://sudokutechniques.blogspot.com/2016/06/sudoku-techniques.html";l={STR_TOUCH_SUDOKU:"\u63a8\u6572\u6570\u72ec",STR_WRITTEN_BY:"David Han",STR_CURRENT_VERSION:"\u5f53\u524d\u7248\u672c",STR_OK:"\u786e\u8ba4",STR_CANCEL:"\u53d6\u6d88",STR_PUZZLE:"\u8ff7\u9898",STR_PUZZLE_EASY:"\u521d\u7ea7",STR_PUZZLE_MEDIUM:"\u4e2d\u7ea7",STR_PUZZLE_HARD:"\u9ad8\u7ea7",STR_PUZZLE_EXPERT:"\u9aa8\u7070\u7ea7",
STR_PUZZLE_EASY_HTML:"\u521d\u7ea7",STR_PUZZLE_MEDIUM_HTML:"\u4e2d\u7ea7",STR_PUZZLE_HARD_HTML:"\u9ad8\u7ea7",STR_PUZZLE_EXPERT_HTML:"\u9aa8\u7070",STR_PUZZLE_PRICE_TAG_1:"\u8d2d\u4e70100\u9053\u8da3\u5473\u521d\u7ea7\u8ff7\u9898",STR_PUZZLE_PRICE_TAG_2:"\u8d2d\u4e70100\u9053\u8da3\u5473\u4e2d\u7ea7\u8ff7\u9898",STR_PUZZLE_PRICE_TAG_3:"\u8d2d\u4e70100\u9053\u8da3\u5473\u9ad8\u7ea7\u8ff7\u9898",STR_PUZZLE_PRICE_TAG_4:"\u8d2d\u4e70100\u9053\u8da3\u5473\u9aa8\u7070\u7ea7\u8ff7\u9898",STR_PUZZLE_PRICE_TAG_5:"\u611f\u8c22\u60a8\u7684\u652f\u6301\uff01<br/>\u60a8\u53ef\u4ee5\u8d2d\u4e70\u5168\u5957\u8da3\u5473\u8ff7\u9898\uff0c",
STR_PUZZLE_PRICE_TAG_6:"\u9650\u65f6\u7279\u4ef7\uff0c\u8d2d\u4e70\u5168\u5957\u9053\u8da3\u8ff7\u9898\uff0c",STR_PUZZLE_PRICE_TAG_7:"\u8d2d\u4e70\u5168\u5957\u9053\u8da3\u8ff7\u9898\uff0c",STR_COST:"\u53ea\u9700",STR_COST_JUST:"\u53ea\u9700",STR_INCLUDING:"\u5305\u62ec",STR_PUZZLE_UNIT:"\u9053",STR_COMMA:"\uff0c",STR_AND:"\u548c",STR_TOTALLY:"\u603b\u5171",STR_PURCHASE_MORE:"\u66f4\u591a",STR_PUZZLE_SOLVED:"\u89e3\u9898\u5b8c\u6bd5",STR_DONT_UNDERSTAND:"\u65e0\u6cd5\u63a8\u6572\u6b64\u89e3",STR_STUCK:"\u96be\u5012\u6211\u4e86\uff0c\u671f\u5f85\u4e0b\u4e00\u7248\u672c",
STR_INVALID_SULUTION:"\u6b64\u89e3\u65e0\u6548",STR_USE_P_OR_N_KEY:"\u8bf7\u7528P\u6216N\u952e\u79fb\u81f3\u524d\u89e3\u6216\u540e\u89e3",STR_SPACE_AND_ENTER_KEY:"\u8bf7\u7528\u7a7a\u683c\u952e\u770b\u4e0b\u4e00\u6b65\u63d0\u793a<br/>\u7528\u56de\u8f66\u663e\u793a\u5168\u90e8\u63d0\u793a",STR_RECENT_PUZZLES:"\u6700\u8fd1\u63a8\u6572: <small>\u672a\u89e3\u5b8c</small>",STR_NO_PURCHASE_CAPABILITY:"No purchase capability.",STR_INPUT_NEW_PUZZLE:"\u8f93\u5165\u65b0\u9898...",STR_EDIT:"\u7f16\u8f91",STR_PUZZLE_SAVED:"\u4fdd\u5b58\u5b8c\u6bd5",
STR_DISCARD_PUZZLE:"\u4e22\u5f03\u8f93\u5165...",STR_SUDOKU_RULES_AND_TECHNIQUES:"\u6570\u72ec\u89c4\u5219\u4e0e\u6280\u5de7",STR_FEEDBACK_OR_BUGRETORT:"\u7528\u6237\u53cd\u9988",STR_SUBJECT_FEEDBACK:"\u63a8\u6572\u6570\u72ec\u7684\u7528\u6237\u53cd\u9988",STR_DONT_EDIT_DEBLOW:"\u7a0b\u5e8f\u6570\u636e",STR_DONT_EDIT_ABOVE:"\u7a0b\u5e8f\u6570\u636e",STR_MENU_BACK:"\u68c0\u67e5",STR_MENU_PREV:"\u524d\u89e3",STR_MENU_NEXT:"\u540e\u89e3",STR_MENU_HINT:"\u63d0\u793a",STR_MENU_HELP:"\u5e2e\u52a9",STR_MENU_NEW:"\u8f93\u9898",
STR_MENU_PUZZLES:"\u9898\u5e93",STR_MENU_RECENT:"\u6700\u8fd1",STR_MENU_DISCARD:"\u4e22\u5f03",STR_MENU_SAVE:"\u4fdd\u5b58"};for(var t in c.str)l[t]?c.str[t]=l[t]:z.log("WARNING: Missing "+t)}a()},function(){a();z.log("WARNING: Error navigator.globalization.getPreferredLanguage")})};a.updateConfig=function(a){var z=!1;a.rootSize&&(c.rootSize=a.rootSize,z=!0);a.appStore&&(c.appStore=a.appStore);a.appURI&&(c.appURI=a.appURI);"function"===typeof a.gotoLink&&(c.gotoLink=a.gotoLink);"function"===typeof a.gotoMail&&
(c.gotoMail=a.gotoMail);"boolean"===typeof a.preventEditing&&(c.preventEditing=a.preventEditing);a.lineHeightAdjustment&&(c.lineHeightAdjustment=a.lineHeightAdjustment);a.buttonImage&&(c.buttonImage=a.buttonImage,c.buttonRadius=a.buttonRadius||59,z=!0);a.dialogBgColor&&(c.dialogBgColor=a.dialogBgColor);a.boardBgColor&&(c.boardBgColor=a.boardBgColor);a.showMeInterval&&(c.showMeInterval=a.showMeInterval);"function"===typeof a.mapNumKeys&&(c.mapNumKeys=a.mapNumKeys);"function"===typeof a.mapNumKeys&&
(c.mapNumKeys=a.mapNumKeys);"function"===typeof a.test&&(c.test=a.test);z&&l(c.rootSize[0],c.rootSize[1])};return a}(TouchSudoku||{},window,console,navigator);TouchSudoku=function(a){var K=function(a,t){var l=[],c=/^(?:\(([bcr][1-9])\+([bcr][1-9])\))|([bcr][1-9])/.exec(a);if(c&&0===c.index){var D;if(D=c||/^(?:\(([bcr][1-9])\+([bcr][1-9])\))|([bcr][1-9])/.exec(a)){var x=[];D[3]?x[0]=D[3]:(x[0]=D[1],x[1]=D[2]);D=x}else D=null;l.units=D;a=a.substr(c[0].length)}else a="+"+a;for(;a.length;)if(/^[+-]\(/.test(a)){c=a.indexOf(")");for(x=D=0;0<c;){D=a.substr(0,c).match(/\(/g).length;x++;if(D===x)break;c=a.indexOf(")",c+1)}if(D===x){x=a.substr(0,c+1);D={op:x.charAt(0)};
x=K(x.substr(2,x.length-3));if(!x)return null;D.clues=x;l.push(D);a=a.substr(c+1)}else return null}else if(/^[+-][bcr][1-9]/.test(a))l.push({op:a.charAt(0),unit:a.substr(1)}),a=a.substr(3);else if(/^[+-][1-9][1-9]/.test(a))l.push({op:a.charAt(0),box:a.charAt(1)-1,cell:a.charAt(2)-1}),a=a.substr(3);else if(0===a.indexOf(")")&&"function"===typeof t){l.isWing=!0;t("("+l.units.join("+")+")"+a.substr(1));break}else return null;return l};a.Solution={};a.Solution.fromString=function(a){var t={solution:a},
l=0,c=/^([1-9])([1-9])([1-9])\b/.exec(a);if(!c)return null;l+=c[0].length;t.box=c[1]-1;t.cell=c[2]-1;t.number=c[3]-0;a=t.solution.substr(l);c=/^(=|!)/.exec(a);if(!c)return null;l+=c[0].length;t.conflict="!"===c[1];1===a.indexOf("((")?(a=t.solution.substr(l+1),t.wings=K(a,function(a){t.clues=K(a)})):(a=t.solution.substr(l),t.clues=K(a));return t.clues?t:null};a.Solution.isCompoundClue=function(a){return a.clues&&a.clues.units};a.Solution.isMultiClue=function(a){return a.clues&&!a.clues.units};a.Solution.isUnitClue=
function(a){return!a.clues&&a.unit};a.Solution.isSimpleClue=function(a){return!a.clues&&!a.unit};return a}(TouchSudoku||{});TouchSudoku=function(a,K){var z=a.conf,t=a.Solution,l;a.createShowMe=function(c,D,x,G,Q){function A(b){return(M?z.showMeInterval:1)*b}function S(b){a.menu&&a.menu.dialogMode?a.menu.hideDialog(function(){S(b)}):N&&(N=!1,M=!!b,"function"===typeof O&&O())}var n="#f06060",H=function(b){var a="#b2e8f2 #b7e4f2 #bde0f2 #c2dcf4 #c8d8f4 #ced4f4 #d2d0f6 #d8ccf6 #dec8f6 #e2c4f8 #e8c0f8 #eebcf8 #c8eff6".split(" "),d=[],C,k;return{reset:function(){k={};C=0},getPaleBlue:function(){return a[a.length-1]},get:function(b,
e){if(e&&k[e])return k[e];var d={},R;for(R in k){var f=k[R].dest;if(R.charAt(2)==e&&f){d.light=k[R].light;var h=b.charAt(0),W=b.charCodeAt(1)-49;if("b"===h&&f.indexBox===W||"c"===h&&f.indexCol===W||"r"===h&&f.indexRow===W){d=k[R];break}}}d.light||(d.light=a[C],C=(C+1)%(a.length-1));return k[e]=d},isRainbowBlue:function(b){for(var e=0,k=a.length;e<k;e++)if(d[e]||(d[e]=L(a[e])),b===d[e])return!0;return!1}}}(),L=function(b){var a=K.createElement("div");a.style.backgroundColor=b;return a.style.backgroundColor},
I=L(z.cellBgColor),w=L("#80f080"),s=L("#f8c888"),u=L("#88d8f8"),q=L("#e8f0f8"),F=L("#f0f0d8"),h=L("#d8f8c0"),d=function(){var b;l?(clearTimeout(l),l=0,N=T=!1,O=null,b=G):b=U;for(var a=0;a<b.length;a++){var d=b[a];d.isConflict&&(d.conflictNumber?d.conflictNumber=0:d.setNumber(0),d.color=z.colorFill,d.isConflict=!1);d.style.backgroundColor=z.cellBgColor}U.length=0;J.length=0},p=function(b){var a=b.charAt(0);b=b.charCodeAt(1)-49;switch(a){case "b":return c[b].cells.slice(0);case "c":return D[b].cells.slice(0);
case "r":return x[b].cells.slice(0)}},b=function(b){for(var a=p(b[0]),d=1;d<b.length;d++)Array.prototype.push.apply(a,p(b[d]));return a},f=function(b){b=p(b).slice(0);for(var a=b.length;a--;)b[a].getNumber()&&b.splice(a,1);return b},g=function(b,a,d){b=v(b,a,!0);for(var C,k=b.length;k--;)if(C=b[k].style.backgroundColor,b[k].getNumber()||H.isRainbowBlue(C)||C===F||C===h)b.splice(k,1);else if(d)for(C=a.length;C--;)if(!P(b[k],a[C])){b.splice(k,1);break}return b},v=function(b,a,d){var C=[],k,f,e=p(b);
for(k=a.length;k--;)0<=e.indexOf(a[k])?C.push(a[k]):f=a[k];if(C.length){if(d)for(C.splice(0),k=e.length;k--;)e[k].getNumber()||f&&!P(f,e[k])||C.push(e[k]);return C}if(!d)return C;for(f=0;f<a.length;f++){var h=a[f],c;k=b.charAt(0);c=b.charCodeAt(1)-49;switch(k){case "b":if(h.indexBox<c)for(k=0;9>k;k++){if(e[k].indexCol===h.indexCol||e[k].indexRow===h.indexRow)c=e[k],0>C.indexOf(c)&&C.push(c)}else if(h.indexBox>c)for(k=8;0<=k;k--)if(e[k].indexCol===h.indexCol||e[k].indexRow===h.indexRow)c=e[k],0>C.indexOf(c)&&
C.push(c);break;case "c":if(Math.floor(h.indexCol/3)!==Math.floor(c/3))c=x[h.indexRow].cells[c],0>C.indexOf(c)&&C.push(c);else if(h.indexCol!==c)for(k=0;9>k;k++)e[k].indexBox===h.indexBox&&(c=e[k],0>C.indexOf(c)&&C.push(c));else if(d)for(k=0;9>k;k++)e[k].indexBox===h.indexBox&&e[k].indexRow!==h.indexRow&&(c=e[k],0>C.indexOf(c)&&C.push(c));break;case "r":if(Math.floor(h.indexRow/3)!==Math.floor(c/3))c=D[h.indexCol].cells[c],0>C.indexOf(c)&&C.push(c);else if(h.indexRow!==c)for(k=0;9>k;k++)e[k].indexBox===
h.indexBox&&(c=e[k],0>C.indexOf(c)&&C.push(c));else if(d)for(k=0;9>k;k++)e[k].indexBox===h.indexBox&&e[k].indexCol!==h.indexCol&&(c=e[k],0>C.indexOf(c)&&C.push(c))}}return C},B=function(b,a,d,c,k,p,e){var g=/[+]/.test(d)?"#88d8f8":"#f8c888",V,m=f(c),r=m.length,y=[],v,l;for(v=0;v<r;v++)V=m[v],l=V.style.backgroundColor,(l===I||l===w||l===s||l===u||"#88d8f8"===g&&l===h||"#f8c888"===g&&l===q)&&y.push(V);if(V=k.dest){for(m=0;m<y.length;m++)y[m].style.backgroundColor!==h&&(y[m].style.backgroundColor=g);
"+"===d.charAt(0)?y.length?$(b,a[0],y[0]||V,k.number,k.dest,p,e):"function"===typeof e&&e():1<a.length&&!a.drawingWings?ia(b,a,V,y,g,e):(y.drawingWings=!!a.drawingWings&&(0<=a.indexOf(c)?1:2),da(b,a,V,y,g,e))}else{if(1===y.length&&1===a.length&&k.clues&&k.clues.dests&&1===k.clues.dests.length&&k.clues.dests[0]===y[0])b=y[0].getPoss(),y[0].style.backgroundColor=H.get(c,b[0]).light;else if(1<=y.length&&1<a.length&&0>a.indexOf(c)&&k.clues&&k.clues.dests&&k.clues.dests.length===y.length)for(y[0].getPoss(),
v=0;v<y.length;v++)y[v].style.backgroundColor=H.getPaleBlue();"function"===typeof e&&e()}},ia=function(b,a,d,c,k,h){var e=2,f=function(){if(0===e)"function"===typeof h&&h();else{e--;var b,d,p,W;if(0<J.length&&0>c.indexOf(J[0])){d=J[0];var R=!1;for(b=c.length;b--;)P(d,c[b])&&(W=c.splice(b,1)[0],R=!0);if(R){E(W,k,f);return}1===c.length&&1===J.length&&(J[0]=c[0])}p=g(a[e],c);if(p.length){d=!1;for(b=c.length;b--;)P(p[0],c[b])||(d=!0);if(d&&(d=g(a[(e+1)%2],c),d.length))for(b=p.length;b--;)0<=d.indexOf(p[b])&&
p.splice(b,1)}if(p.length)for(d=0<J.length,b=c.length;b--;)if(!P(p[0],c[b])){if(d){p.length=0;break}J.push(c.splice(b,1)[0])}if(p.length)setTimeout(function(){X(c[0],p,c,k,f);c.length=J.length;for(b=0;b<J.length;b++)c[b]=J[b]},A(10));else{if(0===J.length&&0===e)for(b=0;b<c.length;b++)J[b]=c[b];setTimeout(f,A(1))}}};setTimeout(f,A(4))},$=function(b,a,d,c,k,f,e){var p=f?H.getPaleBlue():H.get(a,c||d.getNumber()).light,g=v(a,[d],!0),m=d.indexCol,r=d.indexRow,y=G[9*r+m],E=0,B=0,n=0,q=0,u=0,t=g[0];a=16;
for(b=g.length;b--;)g[b].getNumber()?g.splice(b,1):(c=Math.abs(g[b].indexCol-d.indexCol)+Math.abs(g[b].indexRow-d.indexRow),c<a&&(t=g[b],a=c));if(0===g.length)"function"===typeof e&&e();else{if(y.indexBox!==t.indexBox)E=-1,(B=t.indexCol-d.indexCol)&&(B/=Math.abs(B)),(n=t.indexRow-d.indexRow)&&(n/=Math.abs(n));else for(b=g.length;b--;)d=g[b].style.backgroundColor,d===w||(d===s||d===h||H.isRainbowBlue(d))||(g[b].style.backgroundColor="#e8f0f8");var x=function(){if(0>E){y.style.backgroundColor=z===I?
"#e8f0f8":z;m!==t.indexCol&&(m+=B);r!==t.indexRow&&(r+=n);y=G[9*r+m];if(y===t){E=0;for(var b=g.length;b--;){var a=g[b].style.backgroundColor;a===w||(a===s||a===h||H.isRainbowBlue(a))||(g[b].style.backgroundColor="#e8f0f8")}}z=y.style.backgroundColor;y.style.backgroundColor=p;l=setTimeout(x,A(2))}else if(y&&y!==k){y.style.backgroundColor=z;if(0===E)y=t,m=y.indexCol,r=y.indexRow,(q=k.indexCol-m)&&(q/=Math.abs(q)),(u=k.indexRow-r)&&(u/=Math.abs(u)),E=1,z=y.style.backgroundColor,y.style.backgroundColor=
p;else if((B&&B===q||n&&n!==u)&&m!==k.indexCol?m+=q:((n&&n===u||B&&B!==q)&&r!==k.indexRow||(m+=q),r+=u),m===k.indexCol&&(q=0),r===k.indexRow&&(u=0),y=G[9*r+m])z=y.style.backgroundColor,y.style.backgroundColor=p;l=setTimeout(x,A(4))}else"function"===typeof e&&(k.style.backgroundColor=p,M?e():(O=e,N=!0))},z=I;d=function(){y.style.backgroundColor!==h&&(y.style.backgroundColor="#88d8f8");z=y.style.backgroundColor;k?l=setTimeout(x,A(4)):(y.style.backgroundColor=p,"function"===typeof e&&e())};"#88d8f8"===
y.style.backgroundColor&&y.getNumber()?(y.style.backgroundColor=z,l=setTimeout(d,A(4))):d()}},da=function(b,a,d,c,k,f){function e(){if(h>=a.length)"function"===typeof f&&setTimeout(f,A(10));else{var b=a[h++],b=g(b,c,!0);b.length?X(d,b,c,k,e):setTimeout(e,A(1))}}var h=0;0===b?Z(b,a,!1,!1,function(){l=setTimeout(e,A(10))}):d.style.backgroundColor!==I&&d.getNumber()?(d.style.backgroundColor=I,l=setTimeout(function(){d.style.backgroundColor=k;l=setTimeout(e,A(4))},A(4))):l=setTimeout(e,A(4))},X=function(b,
a,d,c,k){var f=b.style.backgroundColor;d&&d.drawingWings||(H.isRainbowBlue(f)||f===h)||(b.style.backgroundColor=c);var e=b.indexCol,p=b.indexRow,g=G[9*p+e],m=0,r=a[0];if(g.indexBox!==r.indexBox){var m=-1,v=r.indexCol-b.indexCol;v&&(v/=Math.abs(v));var B=r.indexRow-b.indexRow;B&&(B/=Math.abs(B))}var E=function(){0>m?(e!==r.indexCol&&(e+=v),p!==r.indexRow&&(p+=B),g=G[9*p+e],g===r?m=0:ea(c,g),l=setTimeout(E,A(1))):m<a.length?(0===a[m].getNumber()&&ea(c,a[m],d),m++,l=setTimeout(E,A(1))):"function"===
typeof k&&(M?l=setTimeout(k,A(10)):(O=k,N=!0))};E()},E=function(b,a,d){if(b&&0>J.indexOf(b)){for(var c=0;c<J.length;c++)J[c].style.backgroundColor=I;l=setTimeout(function(){for(var c=0;c<J.length;c++)J[c].style.backgroundColor=a;l=setTimeout(function(){X(J[0],[b],null,a,function(){J.length=0;d()})},A(4))},A(4))}else"function"===typeof d&&d()},ea=function(b,a,d){var c=a.style.backgroundColor;if("#88d8f8"===b){if(c===I||c===w)a.style.backgroundColor="#e8f0f8"}else if(c===I||c===q)a.style.backgroundColor=
"#f0f0d8";else if(c===w||d&&c===u&&!a.getNumber()){if(!d||!d.drawingWings||0>d.indexOf(a))a.style.backgroundColor="#d8f8c0"}else if(d&&c===s){for(b=0;b<d.length;b++)d[b].style.backgroundColor=1===d.drawingWings?"#80f080":"#f0f0d8";a.style.backgroundColor="#80f080"}},ja=function(b,a,d,f,k,h){var e=f.clues.fs,p=0,g=function(){if(p<e.length){var a=e[p++];if(t.isSimpleClue(a))l=setTimeout(function(){$(b,d[0],c[a.box].cells[a.cell],f.number,f.dest,k,g)},A(10));else{var r=a.clues.units[0],v=a.op;Y(b+1,
v,d,[r],a.clues||[],f.dest,!1,function(){B(b,d,v,r,f,!1,g)})}}else"function"===typeof h&&h()};g()},ka=function(a,d,c){l=setTimeout(function(){for(var f=0,k=b(d);f<k.length;f++){var h=k[f].style.backgroundColor;if(h===I||h===F||h===q)k[f].style.backgroundColor=a?"#c8f8c8":"#80f080"}"function"===typeof c&&(l=setTimeout(c,A(10)))},A(20))},Z=function(a,d,c,f,k){var p=c=0;for(d=b(d);p<d.length;p++){var e=d[p],g=e.style.backgroundColor;e.getNumber()||H.isRainbowBlue(g)?0===a&&(e.getNumber()&&g===w)&&(e.style.backgroundColor=
"#c8f8c8",c=10):(0===a&&(g!==w&&g!==h&&g!==s)&&(e.style.backgroundColor="#80f080",c=10),0<a&&(g!==I&&g!==w&&g!==h&&g!==s&&(!f||g!==q&&g!==F))&&(e.style.backgroundColor=z.cellBgColor,c=10))}!M&&c?(O=k,N=!0):"function"===typeof k&&(l=setTimeout(k,A(c)))},fa=function(b,a,d,c){l=setTimeout(function(){if(0<=b&&a){var f=G[b];(f.conflictNumber=f.getNumber)||(f.setNumber(a),f.style.color=z.colorHistory);f.style.backgroundColor=n;f.isConflict=!0;U.push(f)}l=setTimeout(function(){for(var b=d.length;b--;)G[d[b]].style.backgroundColor=
n;l=setTimeout(function(){"function"===typeof c&&c()},A(20))},A(10))},A(10))},aa=[],ma=function(b,d){function f(){Y(0,"=",[],m,v,null,r,function(){var b=!g.length&&v.length&&v[v.length-1].dest;if(b&&P(G[e],b)&&b.style.backgroundColor===s)for(var b=v[v.length-1].dests,a=0;a<b.length;a++)if(b[a].style.backgroundColor===s)if(P(G[e],b[a]))g.push(b[a].index);else{g.length=0;break}g.length?(fa(e,p,g,d),"function"!==typeof z.test&&(M=!1)):la(h,k,p,d)})}var h=b.box,k=b.cell,p=b.number,e=c[h].cells[k].index,
g=a.getConflicts(e,p)||[],v=b.clues,m=v.units,r=!1;v.units=null;H.reset();aa=[];b.wings?(b.wings.units.drawingWings=!0,Y(0,"-",[],b.wings.units,b.wings,null,r,function(){r=!0;M&&!z.test?(O=f,N=!0):f()})):f()},la=function(b,a,d,c){l=setTimeout(function(){ga(b,a,d);l=setTimeout(function(){ga(b,a,d,function(){"function"===typeof c&&c()},A(20))},A(10))},A(20))},ga=function(b,d,f,h){b=c[b].cells[d];"function"===typeof h?(a.board.highlight(b,!1,"#80f080"),"function"===typeof a.apply?a.apply(ba):a.board.setNumber(b.index,
Number(ba[2])),h()):a.board.highlight(b,!0)},P=function(b,a){return b.indexBox===a.indexBox||b.indexCol===a.indexCol||b.indexRow===a.indexRow?!0:!1},ca=function(b,a,d,h){for(var k=d.fs=[];d.length&&"+"===d[0].op;)k.push(d.shift());a?1<a.length?(h=[],k.string="("+a.join("+")+")"+(k.length?"+":"")):(h=f(a[0]),k.string=a[0]+(k.length?"+":"")):k.string="";k.dests=[];if(k.length){for(var g=0;g<k.length;g++){var e=k[g];k.string+=g?e.op:"";var l=null,B=null;if(e.clues){k.string+="("+ca(a,e.clues.units,e.clues,
h.slice(0))+")";if(!e.clues.units){e.number=e.number||e.clues.number;e.dests=e.clues.dests.slice(0);continue}if(e.clues.fs.dests.length)for(var m=h.length;m--;)0<=e.clues.fs.dests.indexOf(h[m])&&h.splice(m,1);e.dests=h.slice(0);m=a||b;if(!m||!m.length)continue;else if(1===k.length){e.dest=null;e.assigned=!0;continue}var r=m[0],E=e.clues.units[0];if(r===E){e.dest=e.dests&&(e.dests.length?e.dests[0]:null);e.assigned=!0;continue}var n=v(r,p(E));if(0===n.length){n=v(r,e.clues.dests,!0);for(m=e.dests.length;m--;)0<=
n.indexOf(e.dests[m])&&e.dests.splice(m,1);continue}if(0<n.length){for(m=n.length;m--;)0>e.dests.indexOf(n[m])&&n.splice(m,1);if(e.clues.dests&&e.clues.dests.length)for(var q=e.clues.dests[0],m=e.dests.length;m--;)P(q,e.dests[m])&&n.push(e.dests[m])}if(n.length)for(q=n[0].indexBox,m=0;m<e.clues.dests.length;m++){var s=e.clues.dests[m];if(q!=s.indexBox){l=null;break}s!=n[0]&&(l=s)}if(!l){e.dests=[];e.dest=null;e.assigned=!0;continue}if("b"===r[0]||"b"===E[0]){e.dests=e.clues.dests.slice(0);continue}0<=
e.clues.dests.indexOf(n[0])&&(B=n[0])}else if(e.unit)for(k.string+=e.unit.substr(0,2),r=f(e.unit.substr(0,2)),m=r.length;m--;)0>h.indexOf(r[m])?l=l||r[m]:B=r[m];else k.string+=""+(e.box+1)+(e.cell+1),l=c[e.box].cells[e.cell];a||(d.number=d.number||l.getNumber());e.dests=h.slice(0);for(m=e.dests.length;m--;)P(e.dests[m],l)&&e.dests.splice(m,1);B&&e.dests.push(B)}if(a)a:{b=h;l=0;for(g=k.length;g--;)k[g].assigned||l++;B=null;for(m=[];l;){if(!m.length)for(m=b.slice(0),g=m.length;g--;)for(E=k.length-3,
r=k.length;r--;)if(e=k[r],!e.assigned&&0>e.dests.indexOf(m[g])&&0>=--E){m.splice(g,1);break}if(m.length===l){for(g=k.length;g--;)e=k[g],e.assigned||(e.assigned=!0,e.dest=m.pop(),r=b.indexOf(e.dest),0<=r&&k.dests.push(b.splice(r,1)[0]));break a}for(r=k.length;r--;)if(e=k[r],!e.assigned)for(e.notCommon=e.dests.length,g=m.length;g--;)0<=e.dests.indexOf(m[g])&&e.notCommon--;E=null;for(g=0;g<k.length;g++)if(e=k[g],!e.assigned&&(r=e.dests.indexOf(B),0<=r&&e.dests.splice(r,1),!E||E.dests.length>e.dests.length||
E.dests.length===e.dests.length&&e.notCommon&&E.notCommon>e.notCommon))E=e;if(E){r=0;for(g=E.dests.length;g--;)if(0>m.indexOf(E.dests[g])){r=g;break}E.dest=B=1===l&&1===m.length?m[0]:E.dests[r];E.assigned=!0;k.dests.push(B);r=b.indexOf(B);0<=r&&b.splice(r,1);r=m.indexOf(B);0<=r&&m.splice(r,1)}l--}k.assigned=!0}else for(m=k.length;m--;)for(g=h.length;g--;)0>k[m].dests.indexOf(h[g])&&k.dests.push(h.splice(g,1)[0])}d.string=k.string;d.assigned=k.assigned;d.dests=h;if(d.length)for(g=0;g<d.length;g++){e=
d[g];d.string+=e.op;B=l=null;if(e.clues)for(d.string+="("+ca(a,e.clues.units,e.clues,h)+")",e.dests=e.clues.dests,m=e.dests.length;m--;)0>h.indexOf(e.dests[m])?l=l||e.dests[m]:B=e.dests[m];else if(e.unit)for(d.string+=e.unit.substr(0,2),r=f(e.unit.substr(0,2)),m=r.length;m--;)0>h.indexOf(r[m])?l=l||r[m]:B=r[m];else d.string+=""+(e.box+1)+(e.cell+1),l=c[e.box].cells[e.cell],d.number=d.number||l.getNumber();if(l){e.dest="+"===e.op?null:l;for(m=d.dests.length;m--;)P(d.dests[m],l)&&d.dests.splice(m,1);
B&&d.dests.push(B)}}return d.string},Y=function(b,a,d,c,h,f,e,g){h.fs||ca(null,c,h);d=h.fs.string;0<=aa.indexOf(d)?Z(b,c,!0,!1,function(){ha(b,a,c,h,f,e,g)}):(aa.push(d),ka(b,c,function(){na(b+1,a,c,h.fs,f,e,function(){Z(b,c,0===h.fs.length,!f,function(){ha(b,a,c,h,f,e,g)})})}))},na=function(b,a,d,h,f,g,e){var p=0,v=function(){var f=h[p++];if(t.isSimpleClue(f))l=setTimeout(function(){$(b,d[0],c[f.box].cells[f.cell],f.number,f.dest,g,m)},A(10));else if(t.isMultiClue(f)){var e=2===h.length&&h[0].clues&&
h[1].clues&&h[0].clues.string===h[1].clues.string;ja(b,a,d,f,e,function(){e&&(h.doneDoubleFitters=(h.doneDoubleFitters|0)+1);l=setTimeout(m,A(4))})}else if(t.isUnitClue(f)||t.isCompoundClue(f)){var k=f.op,v=t.isUnitClue(f)?f.unit:f.clues.units[0];Y(b+1,k+a,d,[v],f.clues||[],f.dest,g,function(){B(b,d,k+a,v,f,2!==(f.clues&&f.clues.fs&&f.clues.fs.doneDoubleFitters)&&g,m)})}else console.log("Unsupported fitters: ",f),m()},m=function(){p<h.length?Z(b-1,d,0===p,!1,v):"function"===typeof e&&(l=setTimeout(e,
A(10)))};m()},ha=function(b,a,d,f,h,g,e){var p=0,v=function(){var e=f[p++];if(t.isSimpleClue(e))l=setTimeout(function(){var f=c[e.box].cells[e.cell],h=/[+]/.test(a)?"#88d8f8":"#f8c888";da(b,d,f,[f],h,m)},A(10));else if(t.isUnitClue(e)||t.isCompoundClue(e)){var v=e.op,E=t.isUnitClue(e)?e.unit:e.clues.units[0];Y(b+1,v+a,d,[E],e.clues||[],h,g,function(){B(b,d,v+a,E,e,g,m)})}else console.log("Unsupported pointings: ",e),m()},m=function(){p<f.length?v():"function"===typeof e&&(l=setTimeout(e,A(10)))};
m()},M,T,N,O,ba,U=[],J=[];return{show:function(b,a,c){"boolean"===typeof a&&(M=a);ba=b;d();if(b=t.fromString(b)){var f=b.clues.units;T=!0;ma(b,function(){"function"===typeof c?l=setTimeout(function(){N=T=!1;O=null;if("function"===typeof z.test){for(var b=U.length,a=[],d=0;d<f.length;d++)for(var h=p(f[d]).slice(0),g=h.length;g--;)h[g].style.backgroundColor===w&&0>a.indexOf(h[g])&&a.push(h[g]);c(b,a.length)}else c()},Math.min(1E3,A(100))):(N=T=!1,O=null)})}},error:function(b,c,f,h,g){return f?(d(),
M=!1,T=!0,fa(b,c,f,function(){T=!1;if(h){var d=G[b],c=a.currentSolution();c?d.setNumber(Number(c[2]),!0):d.setNumber(0);d.style.backgroundColor=z.cellBgColor;d.isConflict=!1;for(c=f.length;c--;)d=G[f[c]],d.style.backgroundColor=z.cellBgColor}"function"===typeof g&&g()}),!0):!1},clear:d,finish:function(){if(T&&M)return M=!1,!0;d()},resume:S,rollback:function(){function b(){d&&(U.push(d),d.style.backgroundColor=n)}var d;l=setTimeout(function C(){if(a.isFirst())a.menu.hideDialog();else{a.prev();var c=
a.currentSolution();c&&"="===c[3]?l=setTimeout(C,1):(d=G[a.Puzzle.boxStringToIndex(c)],a.menu.isShowing()?a.menu.hideDialog(b):b())}},100)},rollbackNode:function(){return U&&U.length?U[0]:null},isShowing:function(b){return T},isPausing:function(){return N&&"function"===typeof O},getShowAll:function(){return M},setShowAll:function(b){M=!!b}}};return a}(TouchSudoku||{},document);TouchSudoku=function(a,K,z){function t(){F&&(clearTimeout(F),F=0)}function l(d){F&&clearTimeout(F);if(!d||F)F=setTimeout(c,n.charInputWindow)}function c(d,a){t();!d&&s&&s.isShowing()&&!s.docked?s.dialogMode?s.hideDialog(function(){c()}):s.hideMenuButtons(function(){c()}):(0<=u&&(G(w[u],!1),u=-1,!a&&s&&s.updateMenuButtons()),0<=q&&(Q(H[q],!1),q=-1))}function D(d,h){t();s&&s.isShowing()&&!s.docked?s.hideMenuButtons(function(){D(d)}):0<=q&&0<=u?(a.apply(a.Puzzle.indexToBoxString(u)+d),a.isEditing()?
(u=(u+1)%81,q=w[u].indexBox,G(w[u],!0)):(0<=u&&(G(w[u],!1),u=-1,s&&s.updateMenuButtons()),0<=q&&(Q(H[q],!1),q=-1))):(d-=1,0>d?c():-1==q?(q=d,Q(H[q],!0),u=-1,l()):0<=q&&-1==u&&(Q(H[q],!1),u=a.Puzzle.boxStringToIndex(String(q+1)+(d+1)),a.isEditing()?(G(w[u],!0),s&&(s.notationMode=!1,s.updateMenuButtons()),h?s&&(s.docked?l():s.showMenuButtons(l)):l()):a.gameSolved()?a.startGame(TouchSudoku.getPuzzle()):a.isPreset(u)?c():a.matchIndex(u)?(G(w[u],!0),s&&s.updateMenuButtons(),h?s&&(s.docked?l():s.showMenuButtons(l)):
l()):c()))}function x(d,a,b){d.addEventListener?d.addEventListener(a,b,!1):d.attachEvent&&d.attachEvent("on"+a,b)}function G(a,c,b){c?(h.style.left=a.offsetLeft+a.parentNode.offsetLeft+3+"px",h.style.top=a.offsetTop+a.parentNode.offsetTop+3+"px",h.style.width=h.style.height=n.cellSize-5+"px",h.style.display="block"):h.style.display="none";a.style.backgroundColor=b?b:n.cellBgColor}function Q(a,c,b){c?(h.style.left=a.offsetLeft+3+"px",h.style.top=a.offsetTop+3+"px",h.style.width=h.style.height=n.boxSize-
7+"px",h.style.display="block"):h.style.display="none";a.style.backgroundColor=b?b:""}function A(){function d(a,d){for(var c=0;9>c;c++)if(d[c]!==b){var h=d[c].getText();1===h.length&&(h=a.indexOf(h),0<=h&&a.splice(h,1))}}function h(a,d){a+="";for(var c=0;9>c;c++)if(d[c]!==b){var p=d[c].notations.indexOf(a);0<=p&&d[c].setNotations(d[c].notations.substr(0,p)+d[c].notations.substr(p+1))}}var b=z.createElement("div");b.style.display="inline-block";b.style.position="absolute";b.style.border=n.cellBorder;
b.style.width=n.cellSize-1+"px";b.style.height=n.cellSize-1+"px";b.style.color=n.colorPreset;b.style.backgroundColor=n.cellBgColor;b.style.textAlign="center";b.style.lineHeight=Math.floor(n.cellSize*n.lineHeightAdjustment)+"px";b.style.fontSize=Math.floor(0.8*n.cellSize)+"px";b.style.textDecoration="none";b.notations=null;b.getText=function(){return"undefined"===typeof b.textContent?b.innerText:b.textContent};b.getPoss=function(){var a="123456789".split("");d(a,H[b.indexBox].cells);d(a,L[b.indexCol].cells);
d(a,I[b.indexRow].cells);return a.join("")};b.updateNotations=function(a){h(a,H[b.indexBox].cells);h(a,L[b.indexCol].cells);h(a,I[b.indexRow].cells)};b.filled=function(){return 1===b.getText().length&&""===b.notations};b.getNumber=function(){return b.number};b.setNumber=function(d,c,h){""!==b.notations&&(b.notations="",b.style.paddingTop="",b.style.height=n.cellSize-1+"px",b.style.fontFamily="",b.style.fontWeight="",b.style.fontSize=Math.floor(0.8*n.cellSize)+"px",b.style.lineHeight=Math.floor(n.cellSize*
n.lineHeightAdjustment)+"px",b.style.letterSpacing="");b.notations="";h?(b.style.color=c?n.colorEditing:n.colorPreset,b.style.cursor=a.menu?"default":"pointer","number"===typeof d&&(b.innerHTML=d?d:"",b.number=d)):(b.style.color=c?n.colorHistory:n.colorFill,b.style.cursor=a.menu?"text":"pointer","number"===typeof d&&(b.innerHTML=d?d:"",b.number=c?0:d))};b.setNotations=function(a){if(b.notations!==a)if(a){b.notations=a;var d=n.cellSize-1,c=Math.floor(0.02*d);b.style.paddingLeft=c+"px";b.style.width=
d-c+"px";c=Math.floor(0.16*d);b.style.paddingTop=c+"px";b.style.height=d-c+"px";b.style.display="inline-block";b.style.whiteSpace="pre";b.style.fontFamily="monospace";b.style.fontWeight="bold";b.style.fontSize=Math.floor(0.3*d)+0+"px";b.style.lineHeight=Math.floor(0.25*d)-0+"px";b.style.letterSpacing=Math.floor(0.075*d)+0+"px";b.style.color=n.colorNotation;for(var d="",c=1,h=0;9>=c;c++)c==a.charAt(h)?(d+=c,h++):d+=" ",0===c%3&&(d+="\n");b.innerHTML=d}else b.setNumber(0)};b.changeNotations=function(a){if(a){var d=
b.notations,c=d.indexOf(a);0>c?0<=b.getPoss().indexOf(a)&&(d=(d+a).split("").sort().join("")):d=d.substr(0,c)+d.substr(c+1);b.setNotations(d)}else b.setNotations("")};b.clickHandler=function(){a.showMe.clear();0<=q&&c(!1,!0);q=b.indexBox;u=-1;D(b.indexCell+1,1);return!0};return b}function S(){var a=z.createElement("div");a.style.display="inline-block";a.style.position="absolute";a.style.border=n.boxBorder;a.style.width=n.boxSize-1+"px";a.style.height=n.boxSize-1+"px";a.style.opacity=0.95;return a}
a=a||{};var n=a.conf,H=[],L=[],I=[],w=[],s,u=-1,q=-1,F,h=function(){var a=z.createElement("div");a.style.position="absolute";a.style.border=n.cellBorder;a.style.display="none";a[void 0!==z.ontouchend?"ontouchend":"onclick"]=function(a){a=a||K.event;a.cancelBubble=!0;c()};return a}();a.getCurrentIndex=function(){return u};a.getBoxIndex=function(){return q};a.getCurrentNode=function(){return 0>u?null:w[u]};a.getConflicts=function(a,c){if(!c)return null;var b,h,g=[],l=a%9,n=Math.floor(a/9),q=27*Math.floor(n/
3)+3*Math.floor(l/3);for(b=0;9>b;b++)if(h=q+9*Math.floor(b/3)+Math.floor(b%3),w[h].getNumber()==c&&h!==a){g.push(h);break}for(b=0;9>b;b++)if(h=9*n+b,w[h].getNumber()==c&&h!==a){g.push(h);break}for(b=0;9>b;b++)if(h=9*b+l,w[h].getNumber()==c&&h!==a){g.push(h);break}return g.length?g:null};a.input=function(d,h){if(0===d&&0>u){var b=a.showMe.rollbackNode();b&&(q=b.indexBox,u=b.index)}a.showMe.clear();if(0<=u){t();var f=w[u],g=f.notations;if((b=d&&a.getConflicts(u,d))&&(!g||0>g.indexOf(d))){l();a.showMe.error(u,
d,b,!0,function(){g&&f.setNotations(g);s.notationMode&&G(f,!0)});return}if(h&&!f.getText()||a.menu.notationMode&&a.menu.notationShowing){f.changeNotations(d);l();return}if(0===d&&!f.getText()&&!a.isEditing()&&a.menu.notationMode&&a.menu.notationShowing){showNotations(!0,f);c();return}}D(d)};a.continueInput=function(){l(!0)};a.cancelInput=c;a.createBoard=function(d,p){p=p||{};p.rootSize=p.rootSize||[d.clientWidth,d.clientHeight];a.updateConfig(p);var b=z.createElement("div");b.isBoard=!0;b.style.display=
"inline-block";b.style.position="relative";b.style.backgroundColor=n.boardBgColor;b.style.opacity=0.95;b.style.border=n.boardBorder;b.style.width=n.boardSize-1+"px";b.style.height=n.boardSize-1+"px";b.style.left="50%";b.style.top="50%";b.style.marginLeft=0-n.boardSize/2+"px";b.style.marginTop=0-n.boardSize/2+"px";b.style.boxShadow=n.boardShadow;for(var f=0;9>f;f+=1)H[f]=S(f),H[f].indexBox=f,H[f].style.left=f%3*n.boxSize+"px",H[f].style.top=Math.floor(f/3)*n.boxSize+"px",b.appendChild(H[f]),H[f].cells=
[],I[f]={},I[f].cells=[],L[f]={},L[f].cells=[];for(f=0;81>f;f+=1){w[f]=A();var g=f%9,v=Math.floor(f/9),B=3*Math.floor(v/3)+Math.floor(g/3),t=g%3,D=v%3,F=3*D+t;w[f].index=f;w[f].indexCol=g;w[f].indexRow=v;w[f].indexBox=B;w[f].indexCell=F;w[f].style.left=t*n.cellSize+"px";w[f].style.top=D*n.cellSize+"px";H[B].appendChild(w[f]);I[v].cells[g]=w[f];L[g].cells[v]=w[f];H[B].cells[3*D+t]=w[f];w[f].board=b}b.appendChild(h);if("function"!==typeof a.createMenu)x(d,"click",function(b){"function"===typeof p.clickHandler&&
p.clickHandler()});else{s=a.createMenu();b.appendChild(s);x(K,"resize",function(){s.reposition(d.clientWidth,d.clientHeight)});s.reposition(d.clientWidth,d.clientHeight);void 0!==z.ontouchend?x(d,"touchend",function(b){b=b.changedTouches[0];X(b.target,b.clientX,b.clientY)}):x(d,"click",function(b){b=b||K.event;2!==b.button&&X(b.target,b.clientX,b.clientY)});var X=function(a,d,h){if(!a||"function"!==typeof a.clickHandler||!a.clickHandler()){a=b.offsetLeft+n.boardSize/2;var f=b.offsetTop+n.boardSize/
2;if(s.dialogMode)1<s.dialogMode&&s.hideDialog();else if(s.isShowing()){var g=!0;!s.docked&&Math.sqrt(Math.pow(d-a,2)+Math.pow(h-f,2))<n.circleRadius-n.buttonSize/2&&(s.dockMenu(),g=!s.docked);g&&s.hideMenuButtons(c,d-b.offsetLeft,h-b.offsetTop)}else s.showMenuButtons(null,d-b.offsetLeft,h-b.offsetTop)}}}d.appendChild(b);"function"===typeof a.keyHandler&&(x(z,"keypress",function(b){b=b||K.event;if(s)s.onkeypress(b);b.cancelBubble||a.keyHandler(b)}),x(z,"keyup",function(b){b=b||K.event;var a=0;switch(b.keyCode){case 37:a=
80;break;case 38:a=72;break;case 39:a=1;break;case 40:a=9}0<=q&&0<=u&&(u=(u+a)%81,q=w[u].indexBox,G(w[u],!0))}));"function"===typeof a.createShowMe&&(a.showMe=a.createShowMe(H,L,I,w,h));a.menu=s;return{init:function(b,a){for(var d=0;81>d;d+=1){var h=b.charCodeAt(d);49<=h&&57>=h?w[d].setNumber(h-48,a,!0):97<=h&&105>=h?w[d].setNumber(h-96):w[d].setNumber(0)}c();a&&(u=q=0,G(w[u],!0))},toggleMenu:function(a){var d=a?n.boardSize/4:n.boardSize/2;a=a?2*b.offsetTop+b.offsetHeight:-b.offsetTop;if(s.isShowing())return s.hideMenu(c,
d,a),!0;s.showMenu(0>u?null:l,d,a);return!1},hideMenu:function(a,d){var h=a?n.boardSize*(d?3:1)/4:n.boardSize/2,f=a?2*b.offsetTop+b.offsetHeight:-b.offsetTop;return s.isShowing()?(s.hideMenu(c,h,f),!0):!1},highlight:G,setNumber:function(b,a,d,c){w[b].setNumber(a,d,c)},done:function(){for(var b=0;81>b;b++)w[b].setNumber(null,null,!0)}}};return a}(TouchSudoku||{},window,document);TouchSudoku=function(a,K){function z(){for(var a=["e8gbf3iadbfi71decha435hib6gc7h9514bfi2afdgh5cde6832g9af9bag834ehced26agigad3ief8b f9ga45hbc1bd8i3fegc5h7bfai45di3gab86b61ihd37e87cef2id14aebc9g6hihf4a7ec2gcb65hd1i gdf8i5c2abaec7f9h4ich2adgf58bd9cg1ef6gi451hc2ce1fb8di71fgeh9bdc4i2a6ceghe8c7d2fai d2ahe6giceihg3a2df6c7db9e8a3g9b1h4feh6dcgea2iae2i6d3g8i8c1db6e7ba5f9ghcdgdf5hci1b b9gaec6dhe6389dgab48a62gic53bfiae4hgh15dgb36iig4cfheb17cib41h56fdbe8917cae8gcfb9d idc1gbhe686a5icgd27ebfh4a9c17fdcebhi4c58b96g1bhigfad35c2h9agef45igbd6c186adce8ibg eidh7abf373b4fe9hah61bi3de72de3897afa73fbd59hfh9157cd23eg9ah62ddb8ec6a799afg4bhce 8i7f5dcabafbci7eh4453b81g6ifc5adihb79hdgcbfe12gaefh9dcg1f92e4385bh4gcaifcdih1f2g5 4h2igcaefac65hbgid95gfd1hcb521h3g46i7f8die3b1c49a2f578fid7ehb13baecf49hghgcbai6d5 ebafghc9dg8d39e2f16ic21dg8e1ehdbfigci37h5a42fdfbgciae8h7fa42ec93d5i67h1bb1iehcfdg ga43hfbei268eid1cgciebagdh6fd2g5h9a3he39b16gd1g9f4c5bh5bghficdadc6age892ihadc27fe gcdbh6eia2i5dacgf8ahfg5ib34h1g3426e9dfiegachb5b3968a4g34ah2eigf9gbfcd8a5feh1igdbc 173ih4befh2i65adgce4fbc7hiaghd3b9f1eif21d57chc1e8g6idbdia5fbc8gfehg93a2dbcg4ah569 1cgdb9eh645fhac2g9ib87f5cd1cgab4hifeb89aef73defdi3gabh7de6i28ac8a3egdf926ib3hade7 98fadc2e7d5abi7c6hb3gf8edi1gfehc2ad9cab9f4hge8di5gafbc6icg2he1de2h4aig3f1g4cefi82 b5g9a8fdc3f8egd1i294ac2fgh5d79aeb3fhhafdicebgeb3fhg41i7cbh6ai541i4bce8g6fhe7d9b3a bh14i765cfcea2h9gddigfech12ibf5ha43g17d236e89h53gd9bfa36bigeadhga9h6dcbee483a27if h2idc5fga4c7fiabhe15fbhg3d93gae694286453b891729871dec67f4heba93eabigc8f4ihc1dfg5b h7b4ef19cicagb8fed5df91c82gg1echd2fib94efg38afh3biad7ed69a72ec8cbg8deiafa58fc9g4b hg6ie1dbcd1c2fge8ii5bd8cfag6c714h2ie5ia3g2hf4bh4e963g1cfhg1ei4bg2ifc4a5hade8bi7cf 16cde2highd7aife3b5ib8gcaf4b3f5ag4897ei6h4cb1481cb9f7e6gdic5ba8c2hgda9efiae2fhg43 384926g1ei65gd13hba27hcei64deacf8bg9hifbgdaec7cb5aihdf24iaeg63hfg84ic52ae1c682497 8g432faiea5c894bfgi62geacdhfbg13h4e9dihbgefca3a5d69hgbghaedc92feci682g1dbdfi175h3 cf2ied7ha1hg6bcdi5eida8726cfbhgae3di9ca4f2eg8dg5cihabfg4953fhab2efhd1ic7ha3bgi6ed gbhf514icea984c6g2f3d729a5h9fa4g2hcechgi6ebadbde1c8if7h7f314e2i4e3b967haai258gcdf".split(" "),
"7h45ifc121fidbc7eh5c2hg16dihaf93gebd9bcadehf7dgeb68aicbe87ai4c6cd1fhbig569gce42h1 ecaih427fb6dc7eai8hgiba6e4cg1e6i8cbdfh3dbg9eaidb5c1h6gd9f8ecgab1bhg4if3ec571fbdhi h16bc5d9gib41g6ce8ce78ida6bf8ieda2g3acbgfhedi7d5ibch1fd7hfa29ce2fa3e97hde9c4hg62a bdf71eihc1cg4i8f25ie8cbfd17d6big3ae85hab6dgc93gi8eab6d82dfcg5ia79e1h2cd6face49hgb dig3bae6h2e8d9f3gacaf5hg4bihce6aib4gf21gdc89ei7dbe8facef9hg4acbad2i3e7h6g8caf2ied 36hgead9bdi5826cagbgadcifhe51cfh792dib7ead8cfh463ibg51aedifcbghfhi2751dcg3badhe69 cgide8bfae4b3afgih681972edcg5hb43ia6ia3fhg4eb2fd19ec8gabe839674dcgef1h2ihif7bdace 5ga2d86cibdfg39ha59hcfaeb7da3d86giebhe9dbc1fgfbge91c4hg6echbdi14ih15fgbcca29g4eh6 dagecfih2cb9d1hf5gf5h7ib3adei634g8ba2g4hfa5c9hc1b597dfah5ig4b6ci4bf8c1ge7fcabedih 57h3i1db6ab4hfg3i5ifce4bhga4eabhigfcf3b175i8dghifcdea2hdeg2faci2a7iec6dh3if4a8b57 6c84ibeg1abefghd9cig4ce126h5agif43hbhdcb1giefbi65hcad7d527cf8aig8iabefcd3fahd97b5 i514fhbcg3f4b97ehagh2acei6dd26heac7iage3b9hdfh9cgdf12ee4ifhc7abbcg51d6i8fahig245c 672h4ieace3ibg18df1dh3febgiib4gahc653fgeibdh185afcd9bgbaeih7fc4gi64bca5hdhca5f792 1behf34ig7d9ab5hfcf38g49baee1cdhgibf2i6eca7d8dhgbifc5acea97b68dhgb6ed1c9if43aheg2 h6dbecgiaib3a7hdfeae7f9482c3gf5hb1d94ahicfbe75i2gd1fc8b3186e9gdfdic1g5hbghedbic1f e498a3f7b3a6gdbehighbeifcd1igh2ed13fb6caghd9ea54fc9gbh8cedbaifgdbaifg8e3f9g3h521d 2a95gcd6hc67adhi2ehdeifb3g11ihd25gcfde3fag2higbf83iae49c1befhdgf7dcha59be8bgi46a3 a5gbdfhcibficg841e8cd5a9fbg7abhed3i6e8fi2cg4a9d3afgeh2die6c1bg8c217heifdfghdiba5c eb16cdg89hg6e192dccdig2hefadf2he3i1gi3gbdah5fa5h9gf4cbfhec9bagdba348g6ie79daf53bh cfage8d9bg4hbi63e1ei213dgfhf1eigcbh4h23dae67i9gdfhba3eaefc498bg2h75fai4cd3i8bgeaf gac5f2ihd62dg9h3ea58iacdgbf3f5hdib1724gfeah3989abgc4f5dcfibea78ig8c1fe42aeb4h7fic cbef9aghd94h52gf1ca76hcd2eid9b3afh75hacg4eifb56gbh9c4age4ifb13hf3ia58d27bhad7ceif 5c9fg8dbab1d39ehf7gh6bdaceiad35bifghi7bh6ce1dhfega42icfihdeg1cb4ega32i8fcba9hf7d5 43h6ia7b52g9hcedfa6a54bghc9i5gbh36adhdbaficegcf17edb9h5bcid81g6ghfeab9d31i4cg6e82 c58gabf4ifb9dchgeaagd56i2c8b3594fha7dfgh2acie9hac5742f7d6a93ehbeibfhd1gch1cbge96d".split(" "),
"c75iadf8bd968c275ahbafged3iba8de9c6g5cdbfgia8i6g1hc2deg4ceihabfa527d689cf8icba57d 8dcaie6bggi564bch1fba7hc5i4i543gfha21chbedig62fgha945c4a2ec8gfi5gid612chch6ibgad5 fcaegbd98bdh9f371egei1hdfc2a8b7c5if4i7d618e2c3fe2d9h7a5bcdi7ahfd178b6cei89fceabdg 7hfc1ed292dah97fe3e93bfdgha1fgie28cdhci476baedb51hcig6fgbeda39h9ed73haf231hf2ied7 idcf521h7f1b3ghied7eh4a93bfa957bfdc8dhfeicgab2cghd169eeg19h4bf3hfibc7e4a3b416ehgi ca5d6bhigd7f8c9eb1bih1egfc49b17dec86e6dihcg1b78cba64e91cgeb4ifh6db3i8a7eheif7a2dc b3e1ghifd94afc5hbg786idba3ehai4bcgefe6d8a7c9bcbgef9daha9bged683fgc2hae49dehci6b7a d1b9e6ghcg8e1dc9f2i6cgh2ea4cbdfag8eih96dce12gae7hbicdf5ga2idf3h2c9ef8d7afdh3g1b9e 3a746ei2heihcabfdg2d6gi853a68di7c2aei3b5h1g6dge1f2dh93h651di3g2agcbefdhid2ih371e6 id7fa5ch28bc4i75afe1fb83dgi7hdef1bic3f17b98e4bie8cdgf1aeb37fi4hdc91e8fb76gh9db1ce be8gdfcia3i4abhfg561gec9hbd4bi61e7h3e769h314b1h3b74ef9hdb3egi169cahfb4e7gfedia2ch e29a7f8cdc87i54abf4fa3bhegigi28ae64cac4fib7ehh56dc79abidebh1cf7bac76i48efg8e4c29a 8db3g9eaf7961hecb43e146bg9hibhe1g4fc5acfidbh7fg4b3hieab3eh461g94higb1635afg9e3hd2 4ifehc271e1bid7h3f7h3a6bei4iba8gfdec3eh419gf2fdgbc5ahi2feg9a3d8h7i3bdf1e134fehib7 bagechif4i85d26cagf3dga9heb34fiea27ha28cgd59fe79fhba43gia2fcd8ehfb14e73i4echigfba b714hicef34e1672ihfhic52dageic2gh6da8bfeadgc9ga4ic6ehbaeh72cifdic2641h75dfghi512c he37dibaf12ihef3gdg64cbae9hdag2fche9bh6eig4ca9ceda8gfbc9hagb64eeg1fhdi23fdbic51hg hd69712ec3igfbehad1b5d3hf976gb1dcehidah569cgbecibh7df175ch9b1d6bfagedic8ih43167be b3i5h1fdg4753f9bh16habgdecigdcfi5ab85b87139f49af8dbgechigdefca23fd1b7895aeb9c8d7f i31682edg2dg1e3hifh6egi42accef81g4big2h5d9c6ada9c26gehfg24cai8eahd9g5fc2eic26817d e4cihabgf9g82fecada26d73e9h25a8dficgc69ebg84adhgca9f52f9d15h72cgaefc24h9hcbgida6e abhcg9df55c6db8917digefab3hcfe1db87i9gd6h5cb1b81ic7fedh4cgefaib7128ic5d66ei2adghc geb9f8d3acih4712fefad3be79hi8e2ad3gfbf17835didc7fe9a8bh23ei7faded9136hbga7f8d2iec 7ieba6cd8ad68c5gb9c2hidg56a4ec7iab8ffagehbdicb8icf4ae7e61dghi3b8cd1b96ge9gb6echa4 eaid3hgf2fh71be49ccbdfgie819412efc7h2chiagfe4g6ech412945fhicbagh72ed19cf1icg6bhde".split(" "),
"2idc176ehh5gibfca4ca68degibebh4i3a7ff3aegbd8id7i1f8ebcafcgh92de9debcah6ggh265dic1 42g9ecfa8c1hfg2i5d5ifa48bcgh5acfg4big3de2ih6abf9dhae7cigb83ead6a4e7ifc8b6hcba4g95 2gi5c41hfeahfbigc4fd3gah95bced18627i7hfiebda3i21473hfeh97cde6ba4cbhfaeigaf52i7cd8 hicfe7a42db6a8igcege1cb4ifh964eac827a85gfb39d372dih651eai8df2gcfdgb3a5hi23h9gedaf 2he4g9c1fa7fhc2id5cid1efghbhe2if3471ga9bde8fc6437ha2eidfacb7eih5bh6ida3gi3g5a8fb4 hibae63dggcad2h5965f49gcbah675bcdih1adcehifgb2hifag453cefhi17b4917c4bhfedb87feaci g4hfiae23b6ceh7iad95adb3hgfhi2g5dcfa4ae3f9bh7cgfb1h4eiaci8gef42ebd1cfg9h68gidba3e 3dhif1gbe2fecgda989gab58c465idg3bhfahcg1i6bedfabh4eic715i68cdg272fdaieh3dhc5bgfa9 dhbiagfe3gi64echb1ceab6897d5g38bf1d9f2iacdg8e8a4gi53f2b4837aeif9cefh24ag1fgedibch h3ef4ga9b2agei3f8d9fd2ah5gcch94f1begd7ahebi3febf3g94ahfd8ic5gb1a5c7bfhd9g9ba8dc6e cdf8ebag9ia76c48b5h2e1gicdfg5ichfba41fb9d7eh34chbaei6gbgaef3d9h6h34i17eb5idgb8fca 62ei348agcdhbg1fi5ga96ehdcb8eadibg6c9c4e6g1b8b7fahced9dfghb93ea1ic7debhfeh231fi74 96ad23g85ec7h16dbi24heigfacgb9feda3h65caghi42a8dbci5fghgbidac56dif38e2ga31e76bh94 1gif28cded239ae6hgh5f4gcaib7debcihfaf92g8a45ccahefdgb9ifacd2e7hec7hi621dbhd15gic6 ic6gedbhae24f819gcg8a2icd652icaf5g4hdaeh7ifcbh6g3dbea917heb6c9dfe943h12gcdbiag8ef gh4bicaf56bed179hc3ai8efd2g1chg69ed2edgabhcif2if34ega8i7bfc4he1df358abg98eaigb6cd d96b8a7echec4gfb1ibage3i8f41gh6ibcdefc2hde9gaidega3fb83f9a2dehge8dif7acbgb1c5h49f b6gc8d51ie946g1bchha3b9efg4cg8d5baiff4biacg8eieah6g3db7hea4f9bcdbf7c985aa39e2hd6g 3a84efigb57d2ihafc9fbgc1hdedc6175bi8aeg9h2fcd2hi6435agfic8bdge1hdaef7c29gbeca94h6 b5hdgic6aadc2e69ghfgih134eb46baieghc8i7c2d5a6ecafhgb94ch594afbggb65c8adii1dgfbh3e ah372e9fd4gbhi631eifed1cb7825hi3afdgfc4beg1higaif4he2332fe7dhiae971hbdc6hd1c697eb cagfb8died69g35h1behba9d3g68iedgc62aadfehbgcig23ifaeh49e1h4gbfcb7d31f95hfch2eiadg 1gfch2e4i53b46iha789daeg3fbf8a2ceg9d7behidac6c4ifg1b5hbf8iacd759ecg48f21d1g5bfih3 dg5cb9fahia3f7heb48b65dac9gg5ahi24c6c8bdafg5i6d97ecb8ae3hif41g21idb3g8febfg1he9dc 8cfdg215iia7hefdcbde2ic1f78bhe3f9ga4c7d1h5b9f6ia2d7ehc52c6ah9dggfheid3baa497bchf5".split(" ")],
d=[{digitalGoodID:"42465900",digitalGoodSKU:"TouchSudoku_puzzles_fun1",digitalGoodName:"100 Interesting Puzzles (Easy)",name:"Easy",text:c.str.STR_PUZZLE_EASY,html:c.str.STR_PUZZLE_EASY_HTML,tag:c.str.STR_PUZZLE_PRICE_TAG_1+c.str.STR_COST+"$0.99",level:1,puzzles:100},{digitalGoodID:"42465902",digitalGoodSKU:"TouchSudoku_puzzles_fun2",digitalGoodName:"100 Interesting Puzzles (Medium)",name:"Medium",text:c.str.STR_PUZZLE_MEDIUM,html:c.str.STR_PUZZLE_MEDIUM_HTML,tag:c.str.STR_PUZZLE_PRICE_TAG_2+c.str.STR_COST+
"$0.99",level:2,puzzles:100},{digitalGoodID:"38997947",digitalGoodSKU:"TouchSudoku_puzzles_fun0",digitalGoodName:"100 Interesting Puzzles (Hard)",name:"Hard",text:c.str.STR_PUZZLE_HARD,html:c.str.STR_PUZZLE_HARD_HTML,tag:c.str.STR_PUZZLE_PRICE_TAG_3+c.str.STR_COST+"$0.99",level:3,puzzles:100},{digitalGoodID:"42465904",digitalGoodSKU:"TouchSudoku_puzzles_fun3",digitalGoodName:"100 Interesting Puzzles (Expert)",name:"Expert",text:c.str.STR_PUZZLE_EXPERT,html:c.str.STR_PUZZLE_EXPERT_HTML,tag:c.str.STR_PUZZLE_PRICE_TAG_4+
c.str.STR_COST+"$0.99",level:4,puzzles:100}],p=0,b=c.str.STR_INCLUDING,f=0;f<d.length;f++)p+=D,b+=D+c.str.STR_PUZZLE_UNIT+d[f].text+(f===d.length-2?c.str.STR_AND:c.str.STR_COMMA);var b=b+(c.str.STR_TOTALLY+p+c.str.STR_PUZZLE_UNIT+c.str.STR_PUZZLE+c.str.STR_COMMA+c.str.STR_COST_JUST),g=[{digitalGoodID:"42924891",digitalGoodSKU:"TouchSudoku_puzzles_fun4",digitalGoodName:"2000 Interesting Puzzles",name:"All",tag:c.str.STR_PUZZLE_PRICE_TAG_5+b+"$0.99",level:0,puzzles:2E3},{digitalGoodID:"42924892",digitalGoodSKU:"TouchSudoku_puzzles_fun5",
digitalGoodName:"2000 Interesting Puzzles",name:"All",tag:c.str.STR_PUZZLE_PRICE_TAG_6+b+"$1.99",level:0,puzzles:2E3},{digitalGoodID:"42924893",digitalGoodSKU:"TouchSudoku_puzzles_fun6",digitalGoodName:"2000 Interesting Puzzles",name:"All1000",tag:c.str.STR_PUZZLE_PRICE_TAG_7+b+"$2.99",level:0,puzzles:2E3}];a.update=function(){var b,c,f=localStorage.getItem("TouchSudokuPuzzles");f&&/([0-9]+)(,[0-9]+){7}/.test(f)?f=f.split(","):(f="0 25 0 25 0 25 0 25".split(" "),localStorage.setItem("TouchSudokuPuzzles",
f.join(",")));var p=-1,l=!1,n=D+25;for(b=a.length;b--;)c=a[b],c.name=d[b].name,c.html=d[b].html,c.available=Math.min(n,parseInt(f[2*b+1])),c.index=Math.min(c.available,parseInt(f[2*b])),l=l||c.available===n,25<c.available&&(p=b),c.goods=[];for(b=a.length;!l&&b--;)c=a[b],0<=p?c.goods.push(g[0]):(c.goods.push(d[b]),c.goods.push(g[1]))};a.update();return a}function t(){if("object"===typeof store&&"non consumable"===store.NON_CONSUMABLE)return!0}function l(){t()&&(store.register({id:"touchsudoku_puzzles_fun1",
alias:"100 Interesting Puzzles (Easy)",type:store.NON_CONSUMABLE}),store.register({id:"touchsudoku_puzzles_fun2",alias:"100 Interesting Puzzles (Medium)",type:store.NON_CONSUMABLE}),store.register({id:"touchsudoku_puzzles_fun0",alias:"100 Interesting Puzzles (Hard)",type:store.NON_CONSUMABLE}),store.register({id:"touchsudoku_puzzles_fun3",alias:"100 Interesting Puzzles (Expert)",type:store.NON_CONSUMABLE}),store.register({id:"touchsudoku_puzzles_fun4",alias:"2000 Interesting Puzzles",type:store.NON_CONSUMABLE}),
store.register({id:"touchsudoku_puzzles_fun5",alias:"2000 Interesting Puzzles",type:store.NON_CONSUMABLE}),store.register({id:"touchsudoku_puzzles_fun6",alias:"2000 Interesting Puzzles",type:store.NON_CONSUMABLE}),store.refresh(),store.when("non consumable").approved(function(c){var d=localStorage.getItem("TouchSudokuPurchaseLog"),p,b;"touchsudoku_puzzles_fun4"===c.id||"touchsudoku_puzzles_fun5"===c.id||"touchsudoku_puzzles_fun6"===c.id?(p=0,b=2E3):"touchsudoku_puzzles_fun1"===c.id?(p=1,b=100):"touchsudoku_puzzles_fun2"===
c.id?(p=2,b=100):"touchsudoku_puzzles_fun0"===c.id?(p=3,b=100):"touchsudoku_puzzles_fun3"===c.id&&(p=4,b=100);d+="Purchased Item: "+c.id+"\n";localStorage.setItem("TouchSudokuPurchaseLog",d);localStorage.setItem("TouchSudokuPurchaseError","");q.addPurchasedPuzzles(p,b);"function"===typeof u&&(u(),u=null,a.menu.showDialog("Thank you for your purchase!"));c.finish()}))}a=a||{};var c=a.conf,D=500,x,G=function(){return"localStorage not supported"},Q=function(a){var d=[];d[a]=null;return d.join(0)}(81),
A=/^TouchSudoku_[0-9]*?[.][0-9]{8}[-][0-9]+_[0-9]{81}$/,S=/[.]([0-9]{8}[-][0-9]+)_/,n=function(a){if(a)return"00000000-0";a=new Date;a=a.getFullYear()+(9>a.getMonth()?"0":"")+(a.getMonth()+1)+(9>=a.getDate()?"0":"")+a.getDate();a!==localStorage.getItem("TouchSudokuToday")&&(localStorage.setItem("TouchSudokuToday",a),localStorage.setItem("TouchSudokuTodayGameIndex",0));var d=parseInt(localStorage.getItem("TouchSudokuTodayGameIndex")||"0")+1;localStorage.setItem("TouchSudokuTodayGameIndex",d);return a+
"-"+d},H=function(a,d){return"TouchSudoku_"+Date.now()+"."+a+"_"+d.replace(/[a-i]/g,"0")},L=function(a,d){var c=new XMLHttpRequest;c.open("GET",a,!1);c.onreadystatechange=function(){if(4===c.readyState&&(200===c.status||0===c.status)){var b=c.responseText;"function"===typeof d&&d(b)}};c.send(null)},I={name:"",ps:null},w=function(a,d,c){var b="puzzles/"+q.getLevelObject(a).name+"100-"+(Math.floor((d-25)/100)+1)+".txt";b===I.fileName?c(I.ps[(d-25)%100]):L(b,function(a){var h=a.trim().split(/\s+/);100===
h.length?(I.fileName=b,I.ps=h,c(I.ps[(d-25)%100])):alert(a)})},s=function(c){localStorage.getItem("TouchSudokuSavedGame")&&q.clear();var d=localStorage.getItem("TouchSudokuToday");if(d&&7===d.length){var p=d.substr(0,6)+"0"+d.substr(6);localStorage.setItem("TouchSudokuToday",p);for(var b=p=0,f=localStorage.length;b<f;b++){var g=localStorage.key(b);if(/^TouchSudoku_[0-9]*?[.][0-9]{7}[-][0-9]+_[0-9]{81}$/.test(g)){var l=localStorage.getItem(g)||"";localStorage.setItem(g,"dummy");localStorage.removeItem(g);
var n=g.match(/[.]([0-9]{7}[-][0-9]+)_/)[1],s=n.substr(0,6)+"0"+n.substr(6),t=g.indexOf(n),g=g.substr(0,t)+s+g.substr(t+n.length);localStorage.setItem(g,l);0<=n.indexOf(d)&&p++}}localStorage.setItem("TouchSudokuTodayGameIndex",p)}localStorage.getItem("TouchSudokuEmbeddedPuzzleIndexes")&&localStorage.removeItem("TouchSudokuEmbeddedPuzzleIndexes");(d=localStorage.getItem("TouchSudokuCurrentLevel"))&&parseInt(d)||localStorage.setItem("TouchSudokuCurrentLevel",3);d=parseInt(localStorage.getItem("TouchSudoku_puzzles_fun0"));
isNaN(d)||(localStorage.setItem("TouchSudokuPuzzles","0,25,0,25,"+Math.min(100,d)+",125,0,25"),x.update(),localStorage.removeItem("TouchSudoku_puzzles_fun0"));d=localStorage.getItem("TouchSudokuPuzzles").split(",");("0"==d[0]&&"0"==d[2]&&"0"==d[4]&&"0"==d[6]||localStorage.getItem("TouchSudokuPurchaseError"))&&"object"===typeof app&&"function"===typeof app.getExistingPurchases?a.menu.showDialog("This is one time sync to BlackBerry World to check if you have previously purchased puzzles in Touch Sudoku.",
[],function(){setTimeout(function(){var b="",d=!1;app.getExistingPurchases(function(f){for(var g=0;g<f.length;g++)d=q.addPurchase(f[g].digitalGoodID)||d,b+="Purchased Item "+(g+1)+": "+f[g].transactionID+","+f[g].digitalGoodSKU+","+f[g].digitalGoodID+"\n";localStorage.setItem("TouchSudokuPurchaseLog",b);localStorage.setItem("TouchSudokuPurchaseError","");a.menu.showDialog(d?"Thank you for your purchase<br/>Enjoy the game!":"Enjoy the game!");"function"===typeof c&&c()},function(d){b="Purchase Error ["+
d.errorID+"]: "+d.errorText;localStorage.setItem("TouchSudokuPurchaseError",b);a.menu.showDialog(b);"function"===typeof c&&c()})},100)}):"125"==d[1]&&"225"==d[3]&&"325"==d[5]?(d[1]=d[3]=d[5]=d[7]=D+"25",localStorage.setItem("TouchSudokuPuzzles",d.join(",")),x.update(),a.menu.showDialog("Thank you for your previous purchase<br/>1000 more puzzles have been added for free, enjoy!")):"425"==d[1]&&("425"==d[3]&&"425"==d[5]&&"425"==d[7])&&(d[1]=d[3]=d[5]=d[7]=D+"25",localStorage.setItem("TouchSudokuPuzzles",
d.join(",")),x.update(),a.menu.showDialog("Thank you for your previous purchase<br/>400 more puzzles have been added for free, enjoy!"));"function"===typeof c&&c()},u,q=localStorage?{houseCleaning:function(a){x=z();s(a);l()},list:function(){for(var a="",d=0,c=localStorage.length;d<c;d++){var b=localStorage.key(d);0===b.indexOf("TouchSudoku")&&(a+=b+": "+localStorage.getItem(b)+"\n")}return a},clear:function(){var a=localStorage.getItem("TouchSudokuSavedGame"),d=localStorage.getItem("TouchSudokuSavedHistory"),
c,b,f=[];for(c=localStorage.length;c--;)b=localStorage.key(c),0===b.indexOf("TouchSudoku")&&f.push(b);for(c=f.length;c--;)b=f[c],localStorage.setItem(b,"dummy"),localStorage.removeItem(b);return a?(localStorage.setItem(H(n(),a),d||""),!0):!1},save:function(a,d){if(/^[0-9a-i]{81}$/.test(a)){for(var c=a.replace(/[a-i]/g,"0"),b="",f=localStorage.length;f--;){var g=localStorage.key(f);A.test(g)&&(g.split("_")[2]===c?(localStorage.setItem(g,"dummy"),localStorage.removeItem(g),b=b||g.match(S)[1]):2E3<f&&
(localStorage.setItem(g,"dummy"),localStorage.removeItem(g)))}b||(b=n(c===Q));c=H(b,c);localStorage.setItem(c,d||"");return c}},load:function(a,d){var p="",b="",f,g,l,n=[];g=0;for(f=localStorage.length;g<f;g++)l=localStorage.key(g),A.test(l)&&n.push(l);0<n.length&&(n.sort(),0<=a&&(f=Math.max(0,n.length-1-a),l=n[f],p=l.split("_")[2],b=localStorage.getItem(l)||"",l.match(S)&&"00000000-0"===l.match(S)[1]?(localStorage.setItem(l,"dummy"),localStorage.removeItem(l),n.splice(f,1)):q.save(p,b)));if("function"===
typeof d)for(f=0,g=n.length;g--;f++)l=n[g].split("_"),d(f,c.str.STR_PUZZLE+"-"+l[1].split(".")[1],l[2],localStorage.getItem(n[g])||"");return[p,b]},emptyPuzzle:function(){return Q},addPurchasedPuzzles:function(a,d){var c,b=localStorage.getItem("TouchSudokuPuzzles"),b=b&&/([0-9]+)(,[0-9]+){7}/.test(b)?b.split(","):"0 25 0 25 0 25 0 25".split(" ");if(1<=a&&a<=x.length)c=x[a-1],c.available=25+d,b[2*(a-1)+1]=c.available;else if(!a&&2E3===d)for(var f=0;4>f;f++)c=x[f],c.available=D+25,b[2*f+1]=c.available;
localStorage.setItem("TouchSudokuPuzzles",b.join(","));x.update()},addPurchase:function(a){var d=-1,c=100;switch(a){case "42465900":d=1;c=100;break;case "42465902":d=2;c=100;break;case "38997947":d=3;c=100;break;case "42465904":d=4;c=100;break;case "42924891":case "42924892":case "42924893":d=0,c=2E3}return 0<=d?(q.addPurchasedPuzzles(d,c),!0):!1},getLevelObject:function(a){if("object"===typeof app&&"function"===typeof app.getLevelObject)return app.getLevelObject(a);var d={};1<=a&&a<=x.length&&(a=
x[a-1],d.name=a.name,d.html=a.html,d.index=a.index,d.available=a.available,d.goods=a.goods);return d},getCurrentLevel:function(){var a=parseInt(localStorage.getItem("TouchSudokuCurrentLevel"));a||(a=3,localStorage.setItem("TouchSudokuCurrentLevel",a));return a},setCurrentLevel:function(a){isNaN(a)||(1>a&&(a=1),4<a&&(a=4),localStorage.setItem("TouchSudokuCurrentLevel",a))},purchasePuzzles:function(c,d){if(t()){u=d;var l=c.digitalGoodSKU.toLowerCase();store.order(l)}else"object"===typeof app&&"function"===
typeof app.purchase||a.menu.showDialog("Purchase not implemented."),app.purchase(c,function(b){q.addPurchasedPuzzles(b.level,b.puzzles);localStorage.setItem("TouchSudokuPurchaseError","");"function"===typeof d&&d();a.menu.showDialog("Thank you for your purchase!")},function(b){a.menu.showDialog("Some thing went wrong, please try again later. You won't be charged twice for purchesed items.")})},getPuzzle:function(a,d,c){function b(){g.index++;var b=localStorage.getItem("TouchSudokuPuzzles"),b=b&&/([0-9]+)(,[0-9]+){7}/.test(b)?
b.split(","):"0 25 0 25 0 25 0 25".split(" ");b[2*(a-1)]=g.index;localStorage.setItem("TouchSudokuPuzzles",b.join(","))}a||(a=q.getCurrentLevel());1>a&&(a=1);4<a&&(a=4);var f=q.emptyPuzzle(),g=x[a-1];g.index<g.available?g.index<g.length?(f=g[g.index],b(),"function"===typeof d&&d(f)):w(a,g.index,function(a){f=a;b();"function"===typeof d&&d(f)}):"function"===typeof c&&c(a);return f.replace(/[a-i]/g,"0")},getPurchaseLogs:function(){return localStorage.getItem("TouchSudokuPuzzles")+","+localStorage.getItem("TouchSudokuPurchaseError")},
loadGame:function(a,d){var c="",b="",f=d&&d.match(/sudoku=([._0-9a-i]{81})(&|$)/);f?(c=f[1].replace(/[._]/g,"0"),(f=d.match(/history=((?:[1-9]{3})*)/))&&(b=f[1])):(b=q.load(0),b[0]&&/0/.test(b[0])&&b[0].match(/0/g).length>b[1].length/3?(c=b[0],b=b[1]):(c=q.getPuzzle(),b=""));"function"===typeof a&&a(c,b)}}:{houseCleaning:G,list:G,clear:G,save:G,load:G,loadGame:G,emptyPuzzle:function(){return Q},getPuzzle:function(a,c){"function"===typeof c&&c(x[Math.floor(Math.random()*x.length)][Math.floor(25*Math.random())].replace(/[a-i]/g,
"0"))}},F=function(c,d){var l={};"function"===typeof a.createBoard?(c=c||K.body,a.board=a.createBoard(c,d),a.menu&&"function"===typeof a.menu.showPurchaseDialog&&(F.toggleMenu=a.board.toggleMenu,F.hideMenu=a.board.hideMenu,F.showPurchaseDialog=a.menu.showPurchaseDialog),"function"===typeof a.startGame?(l.print=function(b){return a.print(b)},l.start=function(b,c){a.startGame(b,c);TouchSudoku.show=a.show}):l.start=function(b,c){a.board.init(b);return function(){a.showMe.isShowing()?a.showMe.isPausing()?
a.showMe.resume(!0):a.showMe.setShowAll(!1):(a.board.init(b),a.showMe.clear(),a.showMe.show(c,!0))}}):"function"===typeof a.solve&&(l.solve=function(b){return a.solve(b)});return l};F.getPuzzle=q.getPuzzle;F.save=q.save;F.load=q.load;F.list=q.list;F.clear=q.clear;F.MIN_LEVEL=1;F.MAX_LEVEL=4;F.getLevelObject=q.getLevelObject;F.getCurrentLevel=q.getCurrentLevel;F.setCurrentLevel=q.setCurrentLevel;F.purchasePuzzles=q.purchasePuzzles;F.getPurchaseLogs=q.getPurchaseLogs;F.start=function(c,d,l){a.updateLocale(function(){var a=
TouchSudoku(d,c);q.houseCleaning(function(){q.loadGame(function(c,d){a.start(c,d)},"function"===typeof l?l():"")})})};return F}(TouchSudoku||{},document);
